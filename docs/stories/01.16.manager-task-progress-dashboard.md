# Story 1.16: Manager Task Progress Dashboard

**Epic:** EPIC-01 - Service Center Phase 2 - Workflow, Warranty & Warehouse
**Story ID:** SC-PHASE2-01.16
**Created:** 2025-10-23
**Status:** Draft
**Depends On:** Story 1.5 (Task Dependencies)

---

## Story

**As a** manager,
**I want** a dashboard showing task-level progress across all active tickets,
**so that** I can identify bottlenecks and reassign work proactively.

---

## Acceptance Criteria

1. Create database view `v_task_progress_summary` aggregating task metrics
2. Create tRPC procedures:
   - `workflow.getTaskProgressSummary` - Overall metrics
   - `workflow.getTicketsWithBlockedTasks` - Tickets with blocked tasks
   - `workflow.getTechnicianWorkload` - Tasks per technician
3. Build dashboard at `/dashboard/task-progress` (Admin/Manager only)
4. Display metrics: total active tickets, tasks in progress, blocked tasks, average completion time
5. Show tickets with blocked tasks (alert section)
6. Technician workload chart (tasks assigned vs completed)
7. Task completion timeline (last 7/30 days)
8. Filter by: technician, date range, ticket status
9. Drill-down: click metric â†’ see detailed task list
10. Export task progress report to PDF/CSV

---

## Integration Verification

- **IV1**: Dashboard queries do not slow down ticket operations
- **IV2**: View-based metrics update in real-time as tasks progress
- **IV3**: Manager access does not interfere with technician workflow
- **IV4**: Dashboard performs well with 100+ active tickets

---

## Tasks / Subtasks

### Database Tasks
- [ ] Create v_task_progress_summary view
- [ ] Create indexes for dashboard queries
- [ ] Add computed columns for performance

### Backend Tasks
- [ ] Implement task progress tRPC procedures
- [ ] Optimize queries for large datasets
- [ ] Implement report generation

### Frontend Tasks
- [ ] Build task progress dashboard page
- [ ] Create metrics cards (total, in progress, blocked)
- [ ] Build workload chart (Chart.js or Recharts)
- [ ] Create blocked tasks alert section
- [ ] Implement filters and drill-down

---

## Dev Notes

**Key Metrics:**
- Active tickets with tasks
- Tasks: pending, in_progress, completed, blocked
- Average task completion time
- Technician utilization rate

**Performance:** Use materialized view or caching for expensive aggregations

**Testing:** Manual dashboard access, filter testing, export functionality

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-23 | 1.0 | Initial story creation | John (PM) |
